<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An atomic storage for a reference counted smart pointer like `Arc` or `Option&lt;Arc&gt;`."><meta name="keywords" content="rust, rustlang, rust-lang, ArcSwapAny"><title>ArcSwapAny in arc_swap - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../arc_swap/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../arc_swap/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">ArcSwapAny</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.compare_and_swap">compare_and_swap</a></li><li><a href="#method.const_empty">const_empty</a></li><li><a href="#method.empty">empty</a></li><li><a href="#method.from_pointee">from_pointee</a></li><li><a href="#method.from_pointee-1">from_pointee</a></li><li><a href="#method.into_inner">into_inner</a></li><li><a href="#method.load">load</a></li><li><a href="#method.load_full">load_full</a></li><li><a href="#method.map">map</a></li><li><a href="#method.new">new</a></li><li><a href="#method.rcu">rcu</a></li><li><a href="#method.store">store</a></li><li><a href="#method.swap">swap</a></li><li><a href="#method.with_strategy">with_strategy</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block"><li><a href="#impl-Access%3CT%3E-for-ArcSwapAny%3CArc%3CT%3E%2C%20S%3E">Access&lt;T&gt;</a></li><li><a href="#impl-Access%3CT%3E-for-ArcSwapAny%3CRc%3CT%3E%2C%20S%3E">Access&lt;T&gt;</a></li><li><a href="#impl-Access%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E">Access&lt;T&gt;</a></li><li><a href="#impl-Debug-for-ArcSwapAny%3CT%2C%20S%3E">Debug</a></li><li><a href="#impl-Default-for-ArcSwapAny%3CT%2C%20S%3E">Default</a></li><li><a href="#impl-Display-for-ArcSwapAny%3CT%2C%20S%3E">Display</a></li><li><a href="#impl-Drop-for-ArcSwapAny%3CT%2C%20S%3E">Drop</a></li><li><a href="#impl-From%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E">From&lt;T&gt;</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block"><li><a href="#impl-RefUnwindSafe-for-ArcSwapAny%3CT%2C%20S%3E">RefUnwindSafe</a></li><li><a href="#impl-Send-for-ArcSwapAny%3CT%2C%20S%3E">Send</a></li><li><a href="#impl-Sync-for-ArcSwapAny%3CT%2C%20S%3E">Sync</a></li><li><a href="#impl-Unpin-for-ArcSwapAny%3CT%2C%20S%3E">Unpin</a></li><li><a href="#impl-UnwindSafe-for-ArcSwapAny%3CT%2C%20S%3E">UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block"><li><a href="#impl-Any-for-ArcSwapAny%3CT%2C%20S%3E">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-DynAccess%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E">DynAccess&lt;T&gt;</a></li><li><a href="#impl-From%3C!%3E-for-ArcSwapAny%3CT%2C%20S%3E">From&lt;!&gt;</a></li><li><a href="#impl-From%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E-1">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-ArcSwapAny%3CT%2C%20S%3E">Into&lt;U&gt;</a></li><li><a href="#impl-ToString-for-ArcSwapAny%3CT%2C%20S%3E">ToString</a></li><li><a href="#impl-TryFrom%3CU%3E-for-ArcSwapAny%3CT%2C%20S%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-ArcSwapAny%3CT%2C%20S%3E">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In arc_swap</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Struct <a href="index.html">arc_swap</a>::<wbr><a class="struct" href="#">ArcSwapAny</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/arc_swap/lib.rs.html#302-313">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-decl"><pre class="rust struct"><code>pub struct ArcSwapAny&lt;T:&nbsp;<a class="trait" href="trait.RefCnt.html" title="trait arc_swap::RefCnt">RefCnt</a>, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;T&gt;&nbsp;=&nbsp;<a class="type" href="strategy/type.DefaultStrategy.html" title="type arc_swap::strategy::DefaultStrategy">DefaultStrategy</a>&gt; { /* private fields */ }</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An atomic storage for a reference counted smart pointer like <a href="https://doc.rust-lang.org/std/sync/struct.Arc.html"><code>Arc</code></a> or <code>Option&lt;Arc&gt;</code>.</p>
<p>This is a storage where a smart pointer may live. It can be read and written atomically from
several threads, but doesn’t act like a pointer itself.</p>
<p>One can be created <a href="https://doc.rust-lang.org/nightly/std/convert/trait.From.html#tymethod.from"><code>from</code></a> an <a href="https://doc.rust-lang.org/std/sync/struct.Arc.html"><code>Arc</code></a>. To get the pointer back, use the
<a href="#method.load"><code>load</code></a>.</p>
<h2 id="note"><a href="#note">Note</a></h2>
<p>This is the common generic implementation. This allows sharing the same code for storing
both <code>Arc</code> and <code>Option&lt;Arc&gt;</code> (and possibly other similar types).</p>
<p>In your code, you most probably want to interact with it through the
<a href="type.ArcSwap.html"><code>ArcSwap</code></a> and <a href="type.ArcSwapOption.html"><code>ArcSwapOption</code></a> aliases. However,
the methods they share are described here and are applicable to both of them. That’s why the
examples here use <code>ArcSwap</code> ‒ but they could as well be written with <code>ArcSwapOption</code> or
<code>ArcSwapAny</code>.</p>
<h2 id="type-parameters"><a href="#type-parameters">Type parameters</a></h2>
<ul>
<li><code>T</code>: The smart pointer to be kept inside. This crate provides implementation for <code>Arc&lt;_&gt;</code> and
<code>Option&lt;Arc&lt;_&gt;&gt;</code> (<code>Rc</code> too, but that one is not practically useful). But third party could
provide implementations of the <a href="trait.RefCnt.html"><code>RefCnt</code></a> trait and plug in others.</li>
<li><code>S</code>: Chooses the <a href="strategy/index.html" title="strategy">strategy</a> used to protect the data inside. They come with various
performance trade offs, the default <a href="strategy/type.DefaultStrategy.html" title="DefaultStrategy"><code>DefaultStrategy</code></a> is good rule of thumb for most use
cases.</li>
</ul>
<h2 id="examples"><a href="#examples">Examples</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>arc = Arc::new(<span class="number">42</span>);
<span class="kw">let </span>arc_swap = ArcSwap::from(arc);
<span class="macro">assert_eq!</span>(<span class="number">42</span>, <span class="kw-2">**</span>arc_swap.load());
<span class="comment">// It can be read multiple times
</span><span class="macro">assert_eq!</span>(<span class="number">42</span>, <span class="kw-2">**</span>arc_swap.load());

<span class="comment">// Put a new one in there
</span><span class="kw">let </span>new_arc = Arc::new(<span class="number">0</span>);
<span class="macro">assert_eq!</span>(<span class="number">42</span>, <span class="kw-2">*</span>arc_swap.swap(new_arc));
<span class="macro">assert_eq!</span>(<span class="number">0</span>, <span class="kw-2">**</span>arc_swap.load());</code></pre></div>
<h2 id="known-bugs"><a href="#known-bugs">Known bugs</a></h2>
<p>Currently, things like <code>ArcSwapAny&lt;Option&lt;Option&lt;Arc&lt;_&gt;&gt;&gt;&gt;</code> (notice the double Option) don’t
work properly. A proper solution is being looked into
(<a href="https://github.com/vorner/arc-swap/issues">#81</a>).</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><div id="implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#360-674">source</a><a href="#impl-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T:&nbsp;<a class="trait" href="trait.RefCnt.html" title="trait arc_swap::RefCnt">RefCnt</a>, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;T&gt;&gt; <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#362-367">source</a><h4 class="code-header">pub fn <a href="#method.new" class="fnname">new</a>(val: T) -&gt; Self<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: Default,</span></h4></section></summary><div class="docblock"><p>Constructs a new storage.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.with_strategy" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#370-380">source</a><h4 class="code-header">pub fn <a href="#method.with_strategy" class="fnname">with_strategy</a>(val: T, strategy: S) -&gt; Self</h4></section></summary><div class="docblock"><p>Constructs a new storage while customizing the protection strategy.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into_inner" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#383-389">source</a><h4 class="code-header">pub fn <a href="#method.into_inner" class="fnname">into_inner</a>(self) -&gt; T</h4></section></summary><div class="docblock"><p>Extracts the value inside.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.load_full" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#398-400">source</a><h4 class="code-header">pub fn <a href="#method.load_full" class="fnname">load_full</a>(&amp;self) -&gt; T</h4></section></summary><div class="docblock"><p>Loads the value.</p>
<p>This makes another copy of the held pointer and returns it, atomically (it is
safe even when other thread stores into the same instance at the same time).</p>
<p>The method is lock-free and wait-free, but usually more expensive than
<a href="#method.load"><code>load</code></a>.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.load" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#448-451">source</a><h4 class="code-header">pub fn <a href="#method.load" class="fnname">load</a>(&amp;self) -&gt; <a class="struct" href="struct.Guard.html" title="struct arc_swap::Guard">Guard</a>&lt;T, S&gt;</h4></section></summary><div class="docblock"><p>Provides a temporary borrow of the object inside.</p>
<p>This returns a proxy object allowing access to the thing held inside. However, there’s
only limited amount of possible cheap proxies in existence for each thread ‒ if more are
created, it falls back to equivalent of <a href="#method.load_full"><code>load_full</code></a> internally.</p>
<p>This is therefore a good choice to use for eg. searching a data structure or juggling the
pointers around a bit, but not as something to store in larger amounts. The rule of thumb
is this is suited for local variables on stack, but not in long-living data structures.</p>
<h5 id="consistency"><a href="#consistency">Consistency</a></h5>
<p>In case multiple related operations are to be done on the loaded value, it is generally
recommended to call <code>load</code> just once and keep the result over calling it multiple times.
First, keeping it is usually faster. But more importantly, the value can change between the
calls to load, returning different objects, which could lead to logical inconsistency.
Keeping the result makes sure the same object is used.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">struct </span>Point {
    x: usize,
    y: usize,
}

<span class="kw">fn </span>print_broken(p: <span class="kw-2">&amp;</span>ArcSwap&lt;Point&gt;) {
    <span class="comment">// This is broken, because the x and y may come from different points,
    // combining into an invalid point that never existed.
    </span><span class="macro">println!</span>(<span class="string">&quot;X: {}&quot;</span>, p.load().x);
    <span class="comment">// If someone changes the content now, between these two loads, we
    // have a problem
    </span><span class="macro">println!</span>(<span class="string">&quot;Y: {}&quot;</span>, p.load().y);
}

<span class="kw">fn </span>print_correct(p: <span class="kw-2">&amp;</span>ArcSwap&lt;Point&gt;) {
    <span class="comment">// Here we take a snapshot of one specific point so both x and y come
    // from the same one.
    </span><span class="kw">let </span>point = p.load();
    <span class="macro">println!</span>(<span class="string">&quot;X: {}&quot;</span>, point.x);
    <span class="macro">println!</span>(<span class="string">&quot;Y: {}&quot;</span>, point.y);
}</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.store" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#456-458">source</a><h4 class="code-header">pub fn <a href="#method.store" class="fnname">store</a>(&amp;self, val: T)</h4></section></summary><div class="docblock"><p>Replaces the value inside this instance.</p>
<p>Further loads will yield the new value. Uses <a href="#method.swap"><code>swap</code></a> internally.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.swap" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#461-472">source</a><h4 class="code-header">pub fn <a href="#method.swap" class="fnname">swap</a>(&amp;self, new: T) -&gt; T</h4></section></summary><div class="docblock"><p>Exchanges the value inside this instance.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.compare_and_swap" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#490-497">source</a><h4 class="code-header">pub fn <a href="#method.compare_and_swap" class="fnname">compare_and_swap</a>&lt;C&gt;(&amp;self, current: C, new: T) -&gt; <a class="struct" href="struct.Guard.html" title="struct arc_swap::Guard">Guard</a>&lt;T, S&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;C: <a class="trait" href="trait.AsRaw.html" title="trait arc_swap::AsRaw">AsRaw</a>&lt;T::<a class="associatedtype" href="trait.RefCnt.html#associatedtype.Base" title="type arc_swap::RefCnt::Base">Base</a>&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="strategy/trait.CaS.html" title="trait arc_swap::strategy::CaS">CaS</a>&lt;T&gt;,</span></h4></section></summary><div class="docblock"><p>Swaps the stored Arc if it equals to <code>current</code>.</p>
<p>If the current value of the <code>ArcSwapAny</code> equals to <code>current</code>, the <code>new</code> is stored inside.
If not, nothing happens.</p>
<p>The previous value (no matter if the swap happened or not) is returned. Therefore, if the
returned value is equal to <code>current</code>, the swap happened. You want to do a pointer-based
comparison to determine it.</p>
<p>In other words, if the caller „guesses“ the value of current correctly, it acts like
<a href="#method.swap"><code>swap</code></a>, otherwise it acts like <a href="#method.load_full"><code>load_full</code></a> (including
the limitations).</p>
<p>The <code>current</code> can be specified as <code>&amp;Arc</code>, <a href="struct.Guard.html"><code>Guard</code></a>,
<a href="struct.Guards.html"><code>&amp;Guards</code></a> or as a raw pointer (but <em>not</em> owned <code>Arc</code>). See the
<a href="trait.AsRaw.html" title="AsRaw"><code>AsRaw</code></a> trait.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.rcu" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#598-615">source</a><h4 class="code-header">pub fn <a href="#method.rcu" class="fnname">rcu</a>&lt;R, F&gt;(&amp;self, f: F) -&gt; T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: FnMut(&amp;T) -&gt; R,<br>&nbsp;&nbsp;&nbsp;&nbsp;R: Into&lt;T&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="strategy/trait.CaS.html" title="trait arc_swap::strategy::CaS">CaS</a>&lt;T&gt;,</span></h4></section></summary><div class="docblock"><p>Read-Copy-Update of the pointer inside.</p>
<p>This is useful in read-heavy situations with several threads that sometimes update the data
pointed to. The readers can just repeatedly use <a href="#method.load"><code>load</code></a> without any locking.
The writer uses this method to perform the update.</p>
<p>In case there’s only one thread that does updates or in case the next version is
independent of the previous one, simple <a href="#method.swap"><code>swap</code></a> or <a href="#method.store"><code>store</code></a>
is enough. Otherwise, it may be needed to retry the update operation if some other thread
made an update in between. This is what this method does.</p>
<h5 id="examples-1"><a href="#examples-1">Examples</a></h5>
<p>This will <em>not</em> work as expected, because between loading and storing, some other thread
might have updated the value.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>cnt = ArcSwap::from_pointee(<span class="number">0</span>);
thread::scope(|scope| {
    <span class="kw">for _ in </span><span class="number">0</span>..<span class="number">10 </span>{
        scope.spawn(|<span class="kw">_</span>| {
           <span class="kw">let </span>inner = cnt.load_full();
            <span class="comment">// Another thread might have stored some other number than what we have
            // between the load and store.
            </span>cnt.store(Arc::new(<span class="kw-2">*</span>inner + <span class="number">1</span>));
        });
    }
}).unwrap();
<span class="comment">// This will likely fail:
// assert_eq!(10, *cnt.load_full());</span></code></pre></div>
<p>This will, but it can call the closure multiple times to retry:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>cnt = ArcSwap::from_pointee(<span class="number">0</span>);
thread::scope(|scope| {
    <span class="kw">for _ in </span><span class="number">0</span>..<span class="number">10 </span>{
        scope.spawn(|<span class="kw">_</span>| cnt.rcu(|inner| <span class="kw-2">**</span>inner + <span class="number">1</span>));
    }
}).unwrap();
<span class="macro">assert_eq!</span>(<span class="number">10</span>, <span class="kw-2">*</span>cnt.load_full());</code></pre></div>
<p>Due to the retries, you might want to perform all the expensive operations <em>before</em> the
rcu. As an example, if there’s a cache of some computations as a map, and the map is cheap
to clone but the computations are not, you could do something like this:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">fn </span>expensive_computation(x: usize) -&gt; usize {
    x * <span class="number">2 </span><span class="comment">// Let&#39;s pretend multiplication is *really expensive expensive*
</span>}

<span class="kw">type </span>Cache = HashMap&lt;usize, usize&gt;;

<span class="kw">static </span>CACHE: Lazy&lt;ArcSwap&lt;Cache&gt;&gt; = Lazy::new(|| ArcSwap::default());

<span class="kw">fn </span>cached_computation(x: usize) -&gt; usize {
    <span class="kw">let </span>cache = CACHE.load();
    <span class="kw">if let </span><span class="prelude-val">Some</span>(result) = cache.get(<span class="kw-2">&amp;</span>x) {
        <span class="kw">return </span><span class="kw-2">*</span>result;
    }
    <span class="comment">// Not in cache. Compute and store.
    // The expensive computation goes outside, so it is not retried.
    </span><span class="kw">let </span>result = expensive_computation(x);
    CACHE.rcu(|cache| {
        <span class="comment">// The cheaper clone of the cache can be retried if need be.
        </span><span class="kw">let </span><span class="kw-2">mut </span>cache = HashMap::clone(<span class="kw-2">&amp;</span>cache);
        cache.insert(x, result);
        cache
    });
    result
}

<span class="macro">assert_eq!</span>(<span class="number">42</span>, cached_computation(<span class="number">21</span>));
<span class="macro">assert_eq!</span>(<span class="number">42</span>, cached_computation(<span class="number">21</span>));</code></pre></div>
<h5 id="the-cost-of-cloning"><a href="#the-cost-of-cloning">The cost of cloning</a></h5>
<p>Depending on the size of cache above, the cloning might not be as cheap. You can however
use persistent data structures ‒ each modification creates a new data structure, but it
shares most of the data with the old one (which is usually accomplished by using <code>Arc</code>s
inside to share the unchanged values). Something like
<a href="https://crates.io/crates/rpds"><code>rpds</code></a> or <a href="https://crates.io/crates/im"><code>im</code></a> might do
what you need.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.map" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#667-673">source</a><h4 class="code-header">pub fn <a href="#method.map" class="fnname">map</a>&lt;I, R, F&gt;(&amp;self, f: F) -&gt; <a class="struct" href="access/struct.Map.html" title="struct arc_swap::access::Map">Map</a>&lt;&amp;Self, I, F&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: Fn(&amp;I) -&gt; &amp;R + Clone,<br>&nbsp;&nbsp;&nbsp;&nbsp;Self: <a class="trait" href="access/trait.Access.html" title="trait arc_swap::access::Access">Access</a>&lt;I&gt;,</span></h4></section></summary><div class="docblock"><p>Provides an access to an up to date projection of the carried data.</p>
<h5 id="motivation"><a href="#motivation">Motivation</a></h5>
<p>Sometimes, an application consists of components. Each component has its own configuration
structure. The whole configuration contains all the smaller config parts.</p>
<p>For the sake of separation and abstraction, it is not desirable to pass the whole
configuration to each of the components. This allows the component to take only access to
its own part.</p>
<h5 id="lifetimes--flexibility"><a href="#lifetimes--flexibility">Lifetimes &amp; flexibility</a></h5>
<p>This method is not the most flexible way, as the returned type borrows into the <code>ArcSwap</code>.
To provide access into eg. <code>Arc&lt;ArcSwap&lt;T&gt;&gt;</code>, you can create the <a href="access/struct.Map.html" title="Map"><code>Map</code></a> type directly. See
the <a href="access/index.html" title="access"><code>access</code></a> module.</p>
<h5 id="performance"><a href="#performance">Performance</a></h5>
<p>As the provided function is called on each load from the shared storage, it should
generally be cheap. It is expected this will usually be just referencing of a field inside
the structure.</p>
<h5 id="examples-2"><a href="#examples-2">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::sync::Arc;

<span class="kw">use </span>arc_swap::ArcSwap;
<span class="kw">use </span>arc_swap::access::Access;

<span class="kw">struct </span>Cfg {
    value: usize,
}

<span class="kw">fn </span>print_many_times&lt;V: Access&lt;usize&gt;&gt;(value: V) {
    <span class="kw">for _ in </span><span class="number">0</span>..<span class="number">25 </span>{
        <span class="kw">let </span>value = value.load();
        <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, <span class="kw-2">*</span>value);
    }
}

<span class="kw">let </span>shared = ArcSwap::from_pointee(Cfg { value: <span class="number">0 </span>});
<span class="kw">let </span>mapped = shared.map(|c: <span class="kw-2">&amp;</span>Cfg| <span class="kw-2">&amp;</span>c.value);
crossbeam_utils::thread::scope(|s| {
    <span class="comment">// Will print some zeroes and some twos
    </span>s.spawn(|<span class="kw">_</span>| print_many_times(mapped));
    s.spawn(|<span class="kw">_</span>| shared.store(Arc::new(Cfg { value: <span class="number">2 </span>})));
}).expect(<span class="string">&quot;Something panicked in a thread&quot;</span>);</code></pre></div>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-ArcSwapAny%3CArc%3CT%3E%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#682-692">source</a><a href="#impl-ArcSwapAny%3CArc%3CT%3E%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;Arc&lt;T&gt;&gt;&gt; <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;Arc&lt;T&gt;, S&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from_pointee" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#686-691">source</a><h4 class="code-header">pub fn <a href="#method.from_pointee" class="fnname">from_pointee</a>(val: T) -&gt; Self<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: Default,</span></h4></section></summary><div class="docblock"><p>A convenience constructor directly from the pointed-to value.</p>
<p>Direct equivalent for <code>ArcSwap::new(Arc::new(val))</code>.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-ArcSwapAny%3COption%3CArc%3CT%3E%3E%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#716-747">source</a><a href="#impl-ArcSwapAny%3COption%3CArc%3CT%3E%3E%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;Option&lt;Arc&lt;T&gt;&gt;&gt;&gt; <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;Option&lt;Arc&lt;T&gt;&gt;, S&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from_pointee-1" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#731-736">source</a><h4 class="code-header">pub fn <a href="#method.from_pointee-1" class="fnname">from_pointee</a>&lt;V:&nbsp;Into&lt;Option&lt;T&gt;&gt;&gt;(val: V) -&gt; Self<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: Default,</span></h4></section></summary><div class="docblock"><p>A convenience constructor directly from a pointed-to value.</p>
<p>This just allocates the <code>Arc</code> under the hood.</p>
<h5 id="examples-3"><a href="#examples-3">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>arc_swap::ArcSwapOption;

<span class="kw">let </span>empty: ArcSwapOption&lt;usize&gt; = ArcSwapOption::from_pointee(<span class="prelude-val">None</span>);
<span class="macro">assert!</span>(empty.load().is_none());
<span class="kw">let </span>non_empty: ArcSwapOption&lt;usize&gt; = ArcSwapOption::from_pointee(<span class="number">42</span>);
<span class="macro">assert_eq!</span>(<span class="number">42</span>, <span class="kw-2">**</span>non_empty.load().as_ref().unwrap());</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.empty" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#741-746">source</a><h4 class="code-header">pub fn <a href="#method.empty" class="fnname">empty</a>() -&gt; Self<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: Default,</span></h4></section></summary><div class="docblock"><p>A convenience constructor for an empty value.</p>
<p>This is equivalent to <code>ArcSwapOption::new(None)</code>.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-ArcSwapAny%3COption%3CArc%3CT%3E%3E%2C%20HybridStrategy%3CDefaultConfig%3E%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#749-778">source</a><a href="#impl-ArcSwapAny%3COption%3CArc%3CT%3E%3E%2C%20HybridStrategy%3CDefaultConfig%3E%3E" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;Option&lt;Arc&lt;T&gt;&gt;, HybridStrategy&lt;DefaultConfig&gt;&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.const_empty" class="method has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#769-777">source</a><h4 class="code-header">pub const fn <a href="#method.const_empty" class="fnname">const_empty</a>() -&gt; Self</h4></section></summary><div class="docblock"><p>A const-fn equivalent of <a href="struct.ArcSwapAny.html#method.empty">empty</a>.</p>
<p>Just like <a href="struct.ArcSwapAny.html#method.empty">empty</a>, this creates an <code>None</code>-holding <code>ArcSwapOption</code>. The <a href="struct.ArcSwapAny.html#method.empty">empty</a> is, however,
more general ‒ this is available only for the default strategy, while <a href="struct.ArcSwapAny.html#method.empty">empty</a> is for any
[Default]-constructible strategy (current or future one).</p>
<h5 id="examples-4"><a href="#examples-4">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">static </span>GLOBAL_DATA: ArcSwapOption&lt;usize&gt; = ArcSwapOption::const_empty();

<span class="macro">assert!</span>(GLOBAL_DATA.load().is_none());
GLOBAL_DATA.store(<span class="prelude-val">Some</span>(Arc::new(<span class="number">42</span>)));
<span class="macro">assert_eq!</span>(<span class="number">42</span>, <span class="kw-2">**</span>GLOBAL_DATA.load().as_ref().unwrap());</code></pre></div>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Access%3CT%3E-for-ArcSwapAny%3CArc%3CT%3E%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/access.rs.html#165-170">source</a><a href="#impl-Access%3CT%3E-for-ArcSwapAny%3CArc%3CT%3E%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;Arc&lt;T&gt;&gt;&gt; <a class="trait" href="access/trait.Access.html" title="trait arc_swap::access::Access">Access</a>&lt;T&gt; for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;Arc&lt;T&gt;, S&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Guard-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Guard-1" class="anchor"></a><h4 class="code-header">type <a href="access/trait.Access.html#associatedtype.Guard" class="associatedtype">Guard</a> = DirectDeref&lt;Arc&lt;T&gt;, S&gt;</h4></section></summary><div class='docblock'>A guard object containing the value and keeping it alive. <a href="access/trait.Access.html#associatedtype.Guard">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.load-2" class="method trait-impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/access.rs.html#167-169">source</a><a href="#method.load-2" class="anchor"></a><h4 class="code-header">fn <a href="access/trait.Access.html#tymethod.load" class="fnname">load</a>(&amp;self) -&gt; Self::<a class="associatedtype" href="access/trait.Access.html#associatedtype.Guard" title="type arc_swap::access::Access::Guard">Guard</a></h4></section></summary><div class='docblock'>The loading method. <a href="access/trait.Access.html#tymethod.load">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Access%3CT%3E-for-ArcSwapAny%3CRc%3CT%3E%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/access.rs.html#179-184">source</a><a href="#impl-Access%3CT%3E-for-ArcSwapAny%3CRc%3CT%3E%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;Rc&lt;T&gt;&gt;&gt; <a class="trait" href="access/trait.Access.html" title="trait arc_swap::access::Access">Access</a>&lt;T&gt; for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;Rc&lt;T&gt;, S&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Guard-2" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Guard-2" class="anchor"></a><h4 class="code-header">type <a href="access/trait.Access.html#associatedtype.Guard" class="associatedtype">Guard</a> = DirectDeref&lt;Rc&lt;T&gt;, S&gt;</h4></section></summary><div class='docblock'>A guard object containing the value and keeping it alive. <a href="access/trait.Access.html#associatedtype.Guard">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.load-3" class="method trait-impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/access.rs.html#181-183">source</a><a href="#method.load-3" class="anchor"></a><h4 class="code-header">fn <a href="access/trait.Access.html#tymethod.load" class="fnname">load</a>(&amp;self) -&gt; Self::<a class="associatedtype" href="access/trait.Access.html#associatedtype.Guard" title="type arc_swap::access::Access::Guard">Guard</a></h4></section></summary><div class='docblock'>The loading method. <a href="access/trait.Access.html#tymethod.load">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Access%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/access.rs.html#146-152">source</a><a href="#impl-Access%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T:&nbsp;<a class="trait" href="trait.RefCnt.html" title="trait arc_swap::RefCnt">RefCnt</a>, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;T&gt;&gt; <a class="trait" href="access/trait.Access.html" title="trait arc_swap::access::Access">Access</a>&lt;T&gt; for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Guard" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Guard" class="anchor"></a><h4 class="code-header">type <a href="access/trait.Access.html#associatedtype.Guard" class="associatedtype">Guard</a> = <a class="struct" href="struct.Guard.html" title="struct arc_swap::Guard">Guard</a>&lt;T, S&gt;</h4></section></summary><div class='docblock'>A guard object containing the value and keeping it alive. <a href="access/trait.Access.html#associatedtype.Guard">Read more</a></div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.load-1" class="method trait-impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/access.rs.html#149-151">source</a><a href="#method.load-1" class="anchor"></a><h4 class="code-header">fn <a href="access/trait.Access.html#tymethod.load" class="fnname">load</a>(&amp;self) -&gt; Self::<a class="associatedtype" href="access/trait.Access.html#associatedtype.Guard" title="type arc_swap::access::Access::Guard">Guard</a></h4></section></summary><div class='docblock'>The loading method. <a href="access/trait.Access.html#tymethod.load">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Debug-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#333-343">source</a><a href="#impl-Debug-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;T&gt;&gt; Debug for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Debug + <a class="trait" href="trait.RefCnt.html" title="trait arc_swap::RefCnt">RefCnt</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#337-342">source</a><a href="#method.fmt" class="anchor"></a><h4 class="code-header">fn <a class="fnname">fmt</a>(&amp;self, formatter: &amp;mut Formatter&lt;'_&gt;) -&gt; FmtResult</h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a>Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Default-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#354-358">source</a><a href="#impl-Default-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T:&nbsp;<a class="trait" href="trait.RefCnt.html" title="trait arc_swap::RefCnt">RefCnt</a> + Default, S:&nbsp;Default + <a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;T&gt;&gt; Default for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.default" class="method trait-impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#355-357">source</a><a href="#method.default" class="anchor"></a><h4 class="code-header">fn <a class="fnname">default</a>() -&gt; Self</h4></section></summary><div class='docblock'>Returns the “default value” for a type. <a>Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Display-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#345-352">source</a><a href="#impl-Display-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;T&gt;&gt; Display for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Display + <a class="trait" href="trait.RefCnt.html" title="trait arc_swap::RefCnt">RefCnt</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fmt-1" class="method trait-impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#349-351">source</a><a href="#method.fmt-1" class="anchor"></a><h4 class="code-header">fn <a class="fnname">fmt</a>(&amp;self, formatter: &amp;mut Formatter&lt;'_&gt;) -&gt; FmtResult</h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a>Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Drop-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#321-331">source</a><a href="#impl-Drop-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T:&nbsp;<a class="trait" href="trait.RefCnt.html" title="trait arc_swap::RefCnt">RefCnt</a>, S:&nbsp;<a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;T&gt;&gt; Drop for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.drop" class="method trait-impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#322-330">source</a><a href="#method.drop" class="anchor"></a><h4 class="code-header">fn <a class="fnname">drop</a>(&amp;mut self)</h4></section></summary><div class='docblock'>Executes the destructor for this type. <a>Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-From%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#315-319">source</a><a href="#impl-From%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T:&nbsp;<a class="trait" href="trait.RefCnt.html" title="trait arc_swap::RefCnt">RefCnt</a>, S:&nbsp;Default + <a class="trait" href="strategy/trait.Strategy.html" title="trait arc_swap::strategy::Strategy">Strategy</a>&lt;T&gt;&gt; From&lt;T&gt; for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from" class="method trait-impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/lib.rs.html#316-318">source</a><a href="#method.from" class="anchor"></a><h4 class="code-header">fn <a class="fnname">from</a>(val: T) -&gt; Self</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-RefUnwindSafe-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S&gt; RefUnwindSafe for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: RefUnwindSafe,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: RefUnwindSafe,</span></h3></section><section id="impl-Send-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-Send-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S&gt; Send for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: Send,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Send,</span></h3></section><section id="impl-Sync-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-Sync-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S&gt; Sync for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: Sync,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Sync,</span></h3></section><section id="impl-Unpin-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-Unpin-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S&gt; Unpin for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: Unpin,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Unpin,</span></h3></section><section id="impl-UnwindSafe-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-UnwindSafe-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, S&gt; UnwindSafe for <a class="struct" href="struct.ArcSwapAny.html" title="struct arc_swap::ArcSwapAny">ArcSwapAny</a>&lt;T, S&gt;<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: UnwindSafe,<br>&nbsp;&nbsp;&nbsp;&nbsp;T: UnwindSafe,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;T as <a class="trait" href="trait.RefCnt.html" title="trait arc_swap::RefCnt">RefCnt</a>&gt;::<a class="associatedtype" href="trait.RefCnt.html#associatedtype.Base" title="type arc_swap::RefCnt::Base">Base</a>: RefUnwindSafe,</span></h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Any-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-Any-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; Any for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?Sized,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl has-srclink"><a href="#method.type_id" class="anchor"></a><h4 class="code-header">fn <a class="fnname">type_id</a>(&amp;self) -&gt; TypeId</h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a>Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-Borrow%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; Borrow&lt;T&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?Sized,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl has-srclink"><span class="since rightside" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span><a href="#method.borrow" class="anchor"></a><h4 class="code-header">fn <a class="fnname">borrow</a>(&amp;self) -&gt; &amp;T</h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a>Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-BorrowMut%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; BorrowMut&lt;T&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?Sized,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl has-srclink"><span class="since rightside" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span><a href="#method.borrow_mut" class="anchor"></a><h4 class="code-header">fn <a class="fnname">borrow_mut</a>(&amp;mut self) -&gt; &amp;mut T</h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a>Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-DynAccess%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/access.rs.html#221-229">source</a><a href="#impl-DynAccess%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, A&gt; <a class="trait" href="access/trait.DynAccess.html" title="trait arc_swap::access::DynAccess">DynAccess</a>&lt;T&gt; for A<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;A: <a class="trait" href="access/trait.Access.html" title="trait arc_swap::access::Access">Access</a>&lt;T&gt;,<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;A as <a class="trait" href="access/trait.Access.html" title="trait arc_swap::access::Access">Access</a>&lt;T&gt;&gt;::<a class="associatedtype" href="access/trait.Access.html#associatedtype.Guard" title="type arc_swap::access::Access::Guard">Guard</a>: 'static,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.load-4" class="method trait-impl has-srclink"><a class="srclink rightside" href="../src/arc_swap/access.rs.html#226-228">source</a><a href="#method.load-4" class="anchor"></a><h4 class="code-header">fn <a href="access/trait.DynAccess.html#tymethod.load" class="fnname">load</a>(&amp;self) -&gt; DynGuard&lt;T&gt;</h4></section></summary><div class='docblock'>The equivalent of <a href="access/trait.Access.html#tymethod.load" title="Access::load"><code>Access::load</code></a>.</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-From%3C!%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-From%3C!%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; From&lt;!&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from-2" class="method trait-impl has-srclink"><span class="since rightside" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span><a href="#method.from-2" class="anchor"></a><h4 class="code-header">fn <a class="fnname">from</a>(t: !) -&gt; T</h4></section></summary><div class='docblock'>Converts to this type from the input type.</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E-1" class="impl has-srclink"><a href="#impl-From%3CT%3E-for-ArcSwapAny%3CT%2C%20S%3E-1" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; From&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from-1" class="method trait-impl has-srclink"><span class="since rightside" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span><a href="#method.from-1" class="anchor"></a><h4 class="code-header">fn <a class="fnname">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-Into%3CU%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, U&gt; Into&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: From&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into" class="method trait-impl has-srclink"><span class="since rightside" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span><a href="#method.into" class="anchor"></a><h4 class="code-header">fn <a class="fnname">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code>[From]&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-ToString-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-ToString-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; ToString for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: Display + ?Sized,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.to_string" class="method trait-impl has-srclink"><a href="#method.to_string" class="anchor"></a><h4 class="code-header">default fn <a class="fnname">to_string</a>(&amp;self) -&gt; String</h4></section></summary><div class='docblock'>Converts the given value to a <code>String</code>. <a>Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-TryFrom%3CU%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, U&gt; TryFrom&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: Into&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a class="associatedtype">Error</a> = Infallible</h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl has-srclink"><span class="since rightside" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span><a href="#method.try_from" class="anchor"></a><h4 class="code-header">fn <a class="fnname">try_from</a>(value: U) -&gt; Result&lt;T, &lt;T as TryFrom&lt;U&gt;&gt;::Error&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="impl has-srclink"><a href="#impl-TryInto%3CU%3E-for-ArcSwapAny%3CT%2C%20S%3E" class="anchor"></a><h3 class="code-header">impl&lt;T, U&gt; TryInto&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: TryFrom&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error" class="anchor"></a><h4 class="code-header">type <a class="associatedtype">Error</a> = &lt;U as TryFrom&lt;T&gt;&gt;::Error</h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl has-srclink"><span class="since rightside" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span><a href="#method.try_into" class="anchor"></a><h4 class="code-header">fn <a class="fnname">try_into</a>(self) -&gt; Result&lt;U, &lt;U as TryFrom&lt;T&gt;&gt;::Error&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="arc_swap" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.0-nightly (5c8bff74b 2022-10-21)" ></div></body></html>